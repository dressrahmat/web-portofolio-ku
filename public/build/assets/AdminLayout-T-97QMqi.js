import{b as L,r as a,j as e,H as S,L as s}from"./app-Cvucz7kI.js";function $({children:w,title:p}){const{auth:t}=L().props,[d,N]=a.useState(localStorage.getItem("darkMode")==="true"||!localStorage.getItem("darkMode")&&window.matchMedia("(prefers-color-scheme: dark)").matches),[l,v]=a.useState(!0),[b,o]=a.useState(!1),[f,g]=a.useState([]),[c,k]=a.useState(0),[y,z]=a.useState(!0),[u,x]=a.useState(!1),[j,M]=a.useState(!1),m=async()=>{try{const i=await(await fetch(route("admin.audit-trail.notifications"))).json();g(i.notifications||[]),k(i.unread_count||0)}catch(r){console.error("Error loading notifications:",r),g([]),k(0)}finally{z(!1)}};a.useEffect(()=>{m();const r=setInterval(m,3e4);return()=>clearInterval(r)},[]),a.useEffect(()=>{d?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))},[d]),a.useEffect(()=>{const r=()=>{window.innerWidth>=768&&o(!0)};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]);const n=r=>route().current(r),h=r=>t.user&&t.user.permissions&&t.user.permissions.includes(r),C=r=>!t.user||!t.user.roles?!1:r.some(i=>t.user.roles.includes(i));return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-neutral-50 dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100",children:[e.jsx(S,{title:p}),e.jsx("div",{className:`fixed inset-0 z-40 md:hidden bg-neutral-900 bg-opacity-50 transition-opacity duration-300 ease-in-out ${b?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>o(!1)}),e.jsxs("div",{className:`fixed z-50 md:static bg-neutral-50 dark:bg-neutral-800 shadow-card transition-transform md:transition-all duration-300 ease-in-out h-screen rounded-r-xl ${b?"translate-x-0":"-translate-x-full"} ${l?"w-64":"w-20"} md:translate-x-0`,children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-700",children:[e.jsx("div",{className:"flex items-center",children:l?e.jsx("h1",{className:"text-xl font-bold text-primary-500 dark:text-primary-400",children:"Admin"}):e.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary-500 dark:text-primary-400",children:"A"})})}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>v(!0),className:`p-1 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 ${l?"hidden":""}`,title:"Expand sidebar",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-neutral-600 dark:text-neutral-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:()=>v(!1),className:`p-1 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 ${l?"":"hidden"}`,title:"Collapse sidebar",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-neutral-600 dark:text-neutral-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M15.707 15.707a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})})]})]}),e.jsx("nav",{className:"p-4",children:e.jsxs("ul",{className:"space-y-2",children:[(h("view dashboard")||C(["admin","superadmin"]))&&e.jsx("li",{children:e.jsxs(s,{href:route("dashboard"),className:`flex items-center p-2 rounded-md transition-colors duration-200 ${n("dashboard")?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-200 border-r-4 border-primary-600 dark:border-primary-400":"hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-700 dark:text-neutral-300"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001 1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),e.jsx("span",{className:`ml-3 ${l?"":"hidden"}`,children:"Dashboard"})]})}),h("manage users")&&e.jsx("li",{children:e.jsxs(s,{href:route("admin.users.index"),className:`flex items-center p-2 rounded-md transition-colors duration-200 ${n("admin.users.*")?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-200 border-r-4 border-primary-600 dark:border-primary-400":"hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-700 dark:text-neutral-300"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),e.jsx("span",{className:`ml-3 ${l?"":"hidden"}`,children:"Users"})]})}),h("manage roles")&&e.jsx("li",{children:e.jsxs(s,{href:route("admin.role-permissions.index",{type:"roles"}),className:`flex items-center p-2 rounded-md transition-colors duration-200 ${n("admin.role-permissions.*")||n("admin.roles.*")||n("admin.permissions.*")?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-200 border-r-4 border-primary-600 dark:border-primary-400":"hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-700 dark:text-neutral-300"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 00-1 1v1a1 1 0 102 0V3a1 1 0 00-1-1zM5 5a1 1 0 00-1 1v1a1 1 0 102 0V6a1 1 0 00-1-1zm10 0a1 1 0 00-1 1v1a1 1 0 102 0V6a1 1 0 00-1-1zM3 10a7 7 0 1114 0H3zm5 4a1 1 0 011-1h2a1 1 0 110 2h-2a1 1 0 01-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:`ml-3 ${l?"":"hidden"}`,children:"Role & Permissions"})]})})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-neutral-50 dark:bg-neutral-800 shadow-sm border-b border-neutral-200 dark:border-neutral-700",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>o(!0),className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 mr-2 md:hidden",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-neutral-600 dark:text-neutral-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),e.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100",children:p})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>N(!d),className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100",children:d?e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>{x(!u),u||m()},className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 relative",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),c>0&&e.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-error-500 rounded-full"})]}),e.jsxs("div",{className:`absolute right-0 mt-2 w-80 bg-white dark:bg-neutral-800 rounded-xl shadow-lg border border-neutral-200 dark:border-neutral-700 z-50 ${u?"block":"hidden"}`,children:[e.jsx("div",{className:"px-4 py-3 border-b border-neutral-200 dark:border-neutral-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-neutral-100",children:"Notifikasi"}),c>0&&e.jsxs("span",{className:"text-xs bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200 px-2 py-1 rounded-full",children:[c," baru"]})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:y?e.jsxs("div",{className:"px-4 py-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-2",children:"Memuat notifikasi..."})]}):f.length===0?e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-neutral-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Belum ada notifikasi"})]}):e.jsx("div",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:f.map(r=>e.jsx(s,{href:route("admin.audit-trail.show",r.id),className:"block px-4 py-3 hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors duration-150",onClick:()=>x(!1),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 rounded-full mt-2 bg-${r.event_color}-500`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:r.user?r.user.name:"Sistem"}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:r.message}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500 mt-1",children:r.created_at_human})]})]})},r.id))})}),e.jsx("div",{className:"px-4 py-3 border-t border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-700 rounded-b-xl",children:e.jsxs(s,{href:route("admin.audit-trail.index"),className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium flex items-center justify-center",onClick:()=>x(!1),children:["Lihat semua notifikasi",e.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>M(!j),className:"flex items-center space-x-2 text-neutral-700 dark:text-neutral-300 hover:text-neutral-900 dark:hover:text-neutral-100",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-500 dark:bg-primary-400 flex items-center justify-center text-white font-medium",children:t.user.name.slice(0,2).toUpperCase()}),e.jsx("span",{className:"hidden md:inline font-medium",children:t.user.name})]}),e.jsxs("div",{className:`absolute right-0 mt-2 w-48 bg-neutral-50 dark:bg-neutral-700 rounded-xl shadow-card py-1 z-50 border border-neutral-200 dark:border-neutral-600 ${j?"":"hidden"}`,children:[e.jsx(s,{href:route("profile.edit"),className:"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600",children:"Profil Anda"}),e.jsx(s,{href:route("admin.settings.index"),className:"block px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600",children:"Pengaturan"}),e.jsx(s,{href:route("logout"),method:"post",as:"button",className:"block w-full text-left px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-600",children:"Keluar"})]})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-1 pt-3 bg-neutral-50 dark:bg-neutral-900",children:w})]})]})}export{$ as A};
