const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BMQFB2AN.js","assets/app-celmFoJj.js","assets/app-D-zkEYVk.css","assets/quill-DZrYvFpI.css"])))=>i.map(i=>d[i]);
import{R as T,r as a,_ as y,j as t}from"./app-celmFoJj.js";const $=({name:b,value:o="",onChange:d,error:l,label:m,height:c=400,placeholder:p="Tulis konten di sini..."})=>{const[_,x]=a.useState(!1),[g,R]=a.useState(null),[h,k]=a.useState(o),j=a.useRef(null);a.useEffect(()=>(x(!0),typeof window<"u"&&y(()=>import("./index-BMQFB2AN.js").then(e=>e.i),__vite__mapDeps([0,1,2])).then(e=>{y(()=>Promise.resolve({}),__vite__mapDeps([3])),R(()=>e.default)}),()=>{x(!1)}),[]);const q=a.useMemo(()=>({toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["blockquote","code-block"],["link","image"],["clean"]],handlers:{image:function(){const e=j.current?.getEditor();e&&M().then(s=>{const r=e.getSelection();e.insertEmbed(r.index,"image",s)}).catch(s=>{console.error("Image upload failed:",s),alert(s)})}}},clipboard:{matchVisual:!1}}),[]),v=a.useMemo(()=>["header","bold","italic","underline","strike","color","background","list","bullet","indent","align","blockquote","code-block","link","image"],[]),M=a.useCallback(()=>new Promise((e,s)=>{const r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.onchange=async()=>{const u=r.files[0];if(!u){s("No file selected");return}if(u.size>2*1024*1024){s("Ukuran gambar maksimal 2MB");return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(u.type)){s("Format gambar harus JPG, PNG, GIF, atau WEBP");return}const f=new FormData;f.append("file",u);const N=document.querySelector('meta[name="csrf-token"]')?.content;N&&f.append("_token",N);try{const n=await fetch(route("admin.upload.image"),{method:"POST",body:f,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok){const I=await n.json().catch(()=>({}));throw new Error(I.message||"Upload failed")}const E=await n.json();let i=E.location||E.url;i&&!i.startsWith("http")&&(i=window.location.origin+(i.startsWith("/")?"":"/")+i),e(i)}catch(n){console.error("Upload error:",n),s(n.message||"Gagal mengupload gambar")}},r.click()}),[]);a.useEffect(()=>{o!==h&&k(o)},[o]);const P=a.useCallback((e,s,r,u)=>{r==="user"&&(k(e),d&&d(e))},[d]),w=a.useMemo(()=>({height:`${c+42}px`,minHeight:`${c+42}px`}),[c]),S=a.useMemo(()=>({height:`${c}px`,border:"none"}),[c]);return!_||!g?t.jsxs("div",{className:"mb-4",children:[m&&t.jsxs("label",{className:"block text-neutral-700 dark:text-neutral-300 text-sm font-medium mb-2",children:[m,l&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:`bg-white dark:bg-neutral-800 rounded-lg border ${l?"border-red-500":"border-neutral-300 dark:border-neutral-600"}`,style:w,children:t.jsxs("div",{className:"h-full p-4",children:[t.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Loading editor..."}),t.jsx("textarea",{name:b,value:o,onChange:e=>d&&d(e.target.value),placeholder:p,className:"w-full h-64 mt-2 p-2 border rounded dark:bg-neutral-700 dark:border-neutral-600",rows:"10"})]})}),l&&t.jsx("p",{className:"text-red-500 text-xs mt-1 dark:text-red-400",children:l})]}):t.jsxs("div",{className:"mb-4",children:[m&&t.jsxs("label",{className:"block text-neutral-700 dark:text-neutral-300 text-sm font-medium mb-2",children:[m,l&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:`bg-white dark:bg-neutral-800 rounded-lg border ${l?"border-red-500":"border-neutral-300 dark:border-neutral-600"}`,style:w,children:t.jsx(g,{ref:j,theme:"snow",value:h,onChange:P,modules:q,formats:v,placeholder:p,style:S,className:"h-full quill-editor-custom"},`quill-${b}`)}),l&&t.jsx("p",{className:"text-red-500 text-xs mt-1 dark:text-red-400",children:l})]})},Q=T.memo($);export{Q};
