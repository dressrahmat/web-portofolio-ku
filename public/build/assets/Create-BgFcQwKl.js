import{r as c,u as P,a as L,b as B,j as e,H as G,L as M}from"./app-celmFoJj.js";import{A as I}from"./AdminLayout-CQak30NM.js";import{T as x,I as n}from"./InputError-D5dxViGU.js";import{P as D}from"./PrimaryButton-BFA6pVfg.js";import{I as d}from"./InputLabel-BowdI2TQ.js";import{Q as z}from"./QuillEditor-WBaXlbzq.js";import{F as f,a as v,b as O,c as R,d as J,e as K,f as U,g as W}from"./index-D1VkzDTA.js";function Z({kategori:N,statusOptions:y}){const[p,h]=c.useState(!1),[g,j]=c.useState(null),{data:r,setData:i,errors:l,post:w,processing:b,reset:_}=P({judul:"",slug:"",konten:"",gambar_utama:null,status:"draf",diterbitkan_pada:"",meta_judul:"",meta_deskripsi:"",kategori_ids:[]}),{success:k,error:u}=L(),{props:F}=B(),m=F.flash||{};c.useEffect(()=>{m.success&&k(m.success),m.error&&u(m.error)},[m]);const C=a=>{a.preventDefault();const s=new FormData;Object.keys(r).forEach(t=>{t==="kategori_ids"?Array.isArray(r[t])&&r[t].forEach(o=>s.append(`${t}[]`,o)):(t==="gambar_utama"&&r[t],s.append(t,r[t]))}),w(route("admin.artikel.store"),{data:s,onSuccess:()=>{k("Artikel berhasil dibuat!"),_()},onError:t=>{u("Gagal membuat artikel. Silakan periksa form.")}})},S=async()=>{if(!r.judul){u("Judul harus diisi terlebih dahulu");return}h(!0);try{const s=await(await fetch(route("admin.artikel.generate-slug"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({judul:r.judul})})).json();i("slug",s.slug)}catch{u("Gagal membuat slug")}finally{h(!1)}},E=a=>{const s=a.target.files[0];if(s){if(s.size>2*1024*1024){u("Ukuran gambar maksimal 2MB");return}if(!["image/jpeg","image/png","image/gif","image/webp"].includes(s.type)){u("Format gambar harus JPG, PNG, GIF, atau WEBP");return}i("gambar_utama",s);const o=new FileReader;o.onloadend=()=>{j(o.result)},o.readAsDataURL(s)}},T=()=>{i("gambar_utama",null),j(null)},A=a=>{i("konten",a)};return e.jsxs(I,{title:"Tambah Artikel",children:[e.jsx(G,{title:"Tambah Artikel"}),e.jsx("div",{className:"mx-auto px-1 lg:px-4 lg:pt-2",children:e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl shadow-card p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Tambah Artikel Baru"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-2",children:"Buat artikel baru untuk website"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"judul",value:"Judul Artikel",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"judul",type:"text",value:r.judul,onChange:a=>i("judul",a.target.value),error:l.judul,placeholder:"Masukkan judul artikel",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(f,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:l.judul})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(d,{htmlFor:"slug",value:"Slug URL",required:!0}),e.jsx("button",{type:"button",onClick:S,disabled:p,className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 flex items-center",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin mr-1 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Membuat..."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"mr-1 h-4 w-4"}),"Generate slug"]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"slug",type:"text",value:r.slug,onChange:a=>i("slug",a.target.value),error:l.slug,placeholder:"slug-artikel-anda",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(v,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:l.slug}),e.jsx("p",{className:"mt-1 text-xs text-neutral-500 dark:text-neutral-400",children:"Slug akan digunakan untuk URL artikel"})]}),e.jsxs("div",{children:[e.jsx(z,{name:"konten",value:r.konten,onChange:A,error:l.konten,label:"Konten Artikel",height:400,placeholder:"Tulis konten artikel di sini..."}),e.jsx(n,{message:l.konten})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"gambar_utama",value:"Gambar Utama"}),g&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative w-64 h-48 rounded-lg overflow-hidden border border-neutral-300 dark:border-neutral-600",children:[e.jsx("img",{src:g,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:T,className:"absolute top-2 right-2 p-2 bg-error-600 text-white rounded-full hover:bg-error-700 transition-colors shadow-lg",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Preview gambar utama"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"cursor-pointer block",children:e.jsxs("div",{className:"flex items-center justify-center px-6 py-8 border-2 border-dashed border-neutral-300 dark:border-neutral-600 rounded-lg hover:border-primary-500 dark:hover:border-primary-400 transition-colors bg-white dark:bg-neutral-700",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"mx-auto h-12 w-12 text-neutral-400"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[e.jsx("span",{className:"font-medium text-primary-600 dark:text-primary-400",children:"Klik untuk upload"})," ","atau drag & drop"]}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"PNG, JPG, GIF, WEBP maksimal 2MB"})]})]}),e.jsx("input",{id:"gambar_utama",name:"gambar_utama",type:"file",className:"hidden",onChange:E,accept:"image/*"})]})}),r.gambar_utama&&e.jsxs("p",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-400",children:["File dipilih: ",r.gambar_utama.name," (",(r.gambar_utama.size/1024).toFixed(1)," ","KB)"]})]}),e.jsx(n,{message:l.gambar_utama})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"status",value:"Status",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{id:"status",name:"status",value:r.status,onChange:a=>i("status",a.target.value),className:"w-full px-4 py-3 pl-10 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400 text-neutral-900 dark:text-white appearance-none",children:y.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:l.status})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"diterbitkan_pada",value:"Tanggal Diterbitkan"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"diterbitkan_pada",name:"diterbitkan_pada",type:"datetime-local",value:r.diterbitkan_pada,onChange:a=>i("diterbitkan_pada",a.target.value),className:"w-full px-4 py-3 pl-10 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400 text-neutral-900 dark:text-white"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:l.diterbitkan_pada}),e.jsx("p",{className:"mt-1 text-xs text-neutral-500 dark:text-neutral-400",children:"Kosongkan untuk menggunakan tanggal saat ini saat diterbitkan"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"kategori_ids",value:"Kategori"}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:N.map(a=>e.jsxs("label",{className:"flex items-center p-3 border border-neutral-300 dark:border-neutral-600 rounded-lg hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"kategori_ids[]",value:a.id,checked:r.kategori_ids.includes(a.id.toString()),onChange:s=>{const t=s.target.value;i("kategori_ids",r.kategori_ids.includes(t)?r.kategori_ids.filter(o=>o!==t):[...r.kategori_ids,t])},className:"h-4 w-4 rounded border-neutral-300 text-primary-600 focus:ring-primary-500 dark:border-neutral-600 dark:bg-neutral-700"}),e.jsxs("span",{className:"ml-3 text-sm font-medium text-neutral-700 dark:text-neutral-300 flex items-center",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),a.nama]})]},a.id))})}),e.jsx(n,{message:l.kategori_ids})]}),e.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4 flex items-center",children:[e.jsx(U,{className:"mr-2 h-5 w-5"}),"SEO Metadata"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"meta_judul",value:"Meta Title"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"meta_judul",name:"meta_judul",type:"text",value:r.meta_judul,onChange:a=>i("meta_judul",a.target.value),error:l.meta_judul,placeholder:"Judul untuk SEO (jika berbeda)",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(f,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:l.meta_judul}),e.jsxs("p",{className:"mt-1 text-xs text-neutral-500 dark:text-neutral-400",children:[r.meta_judul?.length||0,"/255 karakter"]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"meta_deskripsi",value:"Meta Description"}),e.jsx("textarea",{id:"meta_deskripsi",name:"meta_deskripsi",value:r.meta_deskripsi,onChange:a=>i("meta_deskripsi",a.target.value),rows:"3",className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:focus:ring-primary-400 dark:focus:border-primary-400 text-neutral-900 dark:text-white placeholder-neutral-500 dark:placeholder-neutral-400 resize-none",placeholder:"Deskripsi untuk SEO (maksimal 255 karakter)",maxLength:"255"}),e.jsx(n,{message:l.meta_deskripsi}),e.jsxs("p",{className:"mt-1 text-xs text-neutral-500 dark:text-neutral-400",children:[r.meta_deskripsi?.length||0,"/255 karakter"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(M,{href:route("admin.artikel.index"),className:"inline-flex items-center justify-center px-6 py-3 border border-neutral-300 rounded-lg text-neutral-700 hover:bg-neutral-50 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700 transition-colors duration-200 font-medium",children:"Batal"}),e.jsx(D,{type:"submit",disabled:b,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Membuat..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"mr-2 h-5 w-5"}),"Buat Artikel"]})})]})]})]})})]})}export{Z as default};
