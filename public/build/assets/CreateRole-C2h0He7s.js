import{b as f,u as S,r as d,a as E,j as e,H as R,q as F,s as A,v as I,L as q}from"./app-Cvucz7kI.js";import{A as L}from"./AdminLayout-T-97QMqi.js";import{T as z,I as b}from"./InputError-Bckp8oRp.js";import{P as H}from"./PrimaryButton-CTDxlp8O.js";import{I as g}from"./InputLabel-BWLOheBB.js";function M(){const{permissions:y}=f().props,{data:v,setData:n,errors:i,post:N,processing:m}=S({name:"",permissions:[]}),[u,O]=d.useState(y||{}),[a,x]=d.useState({}),{success:p,error:h}=E(),{props:k}=f(),l=k.flash||{};d.useEffect(()=>{l.success&&p(l.success),l.error&&h(l.error)},[l]);const w=s=>{x(t=>{const r={...t};return r[s]?delete r[s]:r[s]=!0,r}),n("permissions",Object.keys(a))},C=s=>{const t=u[s]||[],r=t.every(o=>a[o.name]);x(o=>{const c={...o};return t.forEach(j=>{r?delete c[j.name]:c[j.name]=!0}),c}),n("permissions",Object.keys(a))},P=s=>{s.preventDefault(),N(route("admin.roles.store"),{onSuccess:()=>{p("Role created successfully!")},onError:t=>{h("Failed to create role. Please check the form.")}})};return e.jsxs(L,{title:"Create Role",children:[e.jsx(R,{title:"Create Role"}),e.jsx("div",{className:"mx-auto px-1 lg:px-4 lg:pt-2",children:e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl shadow-card p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Create New Role"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-2",children:"Add a new role with specific permissions for your system."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"name",value:"Role Name",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{id:"name",type:"text",value:v.name,onChange:s=>n("name",s.target.value),error:i.name,placeholder:"Enter role name",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(b,{message:i.name})]}),e.jsxs("div",{children:[e.jsx(g,{value:"Permissions",className:"mb-4"}),e.jsx("div",{className:"space-y-6",children:Object.entries(u).map(([s,t])=>e.jsxs("div",{className:"border border-neutral-200 dark:border-neutral-700 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-medium text-neutral-900 dark:text-white capitalize",children:[s," Permissions"]}),e.jsx("button",{type:"button",onClick:()=>C(s),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"Select All"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.map(r=>e.jsxs("label",{className:"flex items-center p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!a[r.name],onChange:()=>w(r.name),className:"hidden"}),a[r.name]?e.jsx(A,{className:"h-5 w-5 text-primary-600 dark:text-primary-400 mr-2"}):e.jsx(I,{className:"h-5 w-5 text-neutral-400 mr-2"}),e.jsx("span",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:r.name})]},r.id))})]},s))}),e.jsx(b,{message:i.permissions})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(q,{href:route("admin.role-permissions.index",{type:"roles"}),className:"inline-flex items-center justify-center px-6 py-3 border border-neutral-300 rounded-xl text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-600 transition-colors duration-200 font-medium",children:"Cancel"}),e.jsx(H,{type:"submit",disabled:m,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Role"})]})]})]})})]})}export{M as default};
