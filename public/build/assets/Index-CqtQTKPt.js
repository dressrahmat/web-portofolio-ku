import{b as de,r as s,a as ue,c as k,j as e,L as U,H as me}from"./app-ixndsVVo.js";import{A as xe}from"./AdminLayout-DEfAXfXn.js";import{C as he,B as pe,D as fe,P as ge,F as be}from"./Pagination-C2_dgWVT.js";import{C as W}from"./ConfirmationModal-dBfYQuSA.js";import{P as G}from"./PrimaryButton-Q6V_WmuN.js";import{e as H,f as ye,t as q,p as O,s as X,r as Y,u as J,q as ke,i as je,v as we,d as Ne,j as ve}from"./index-BH6x7HeI.js";import{r as Ce}from"./index-BA5a8Z8h.js";import"./Checkbox-EJWnnqVA.js";const Se=({trigger:l,children:m,position:i="bottom-right"})=>{const[d,n]=s.useState({top:0,left:0,width:0}),j=s.useRef(null),[x,D]=s.useState(!1),w=()=>{if(j.current){const p=j.current.getBoundingClientRect();n({top:p.bottom+window.scrollY,left:p.left+window.scrollX,width:p.width})}},h=()=>{switch(i){case"bottom-left":return"origin-top-left left-0";case"bottom-right":return"origin-top-right right-0";default:return"origin-top-right right-0"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:j,onClick:()=>{w(),D(!0)},children:l}),x&&Ce.createPortal(e.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>D(!1),children:e.jsx("div",{className:`absolute mt-1 w-48 rounded-md shadow-lg bg-neutral-50 dark:bg-neutral-800 ring-1 ring-primary-500 ring-opacity-20 focus:outline-none ${h()}`,style:{top:d.top,left:i==="bottom-right"?"auto":d.left,right:i==="bottom-right"?window.innerWidth-d.left-d.width:"auto",zIndex:9999},onClick:p=>p.stopPropagation(),children:m})}),document.body)]})},De=({portfolio:l,onView:m,onEdit:i,onDelete:d})=>{const n=e.jsx("button",{className:"inline-flex justify-center w-full p-2 text-sm font-medium text-primary-600 dark:text-primary-400 bg-neutral-50 dark:bg-neutral-800 rounded-md hover:bg-primary-50 dark:hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:e.jsx(ve,{className:"h-4 w-4","aria-hidden":"true"})});return e.jsx(Se,{trigger:n,position:"bottom-right",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:m,className:"group flex items-center w-full px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-primary-50 dark:hover:bg-neutral-700 hover:text-primary-600 dark:hover:text-primary-400",children:[e.jsx(je,{className:"mr-3 h-4 w-4","aria-hidden":"true"}),"View Details"]}),e.jsxs("button",{onClick:i,className:"group flex items-center w-full px-4 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-primary-50 dark:hover:bg-neutral-700 hover:text-primary-600 dark:hover:text-primary-400",children:[e.jsx(we,{className:"mr-3 h-4 w-4","aria-hidden":"true"}),"Edit"]}),e.jsxs("button",{onClick:d,className:"group flex items-center w-full px-4 py-2 text-sm text-error-600 dark:text-error-400 hover:bg-error-50 dark:hover:bg-error-900/30 hover:text-error-700 dark:hover:text-error-300",children:[e.jsx(Ne,{className:"mr-3 h-4 w-4","aria-hidden":"true"}),"Delete"]})]})})},Ie=({activeTab:l,onTabChange:m,stats:i})=>{const d=[{id:"portfolios",name:"Portfolios",icon:q,count:i?.total_portfolios||0},{id:"technologies",name:"Technologies",icon:Y,count:i?.total_technologies||0},{id:"features",name:"Features",icon:X,count:i?.total_features||0},{id:"images",name:"Images",icon:O,count:i?.total_images||0}];return e.jsx("div",{className:"border-b border-neutral-200 dark:border-neutral-700 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:d.map(n=>{const j=n.icon;return e.jsxs("button",{onClick:()=>m(n.id),className:`
                                whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center
                                ${l===n.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 hover:border-neutral-300 dark:hover:border-neutral-600"}
                            `,children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),n.name,n.count>0&&e.jsx("span",{className:`
                                        ml-2 py-0.5 px-2 text-xs rounded-full
                                        ${l===n.id?"bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-200":"bg-neutral-100 dark:bg-neutral-800 text-neutral-800 dark:text-neutral-200"}
                                    `,children:n.count})]},n.id)})})})},Pe=(l=[])=>{const[m,i]=s.useState(()=>{try{const n=sessionStorage.getItem("selectedPortfolios");return n?JSON.parse(n):l}catch{return l}});s.useEffect(()=>{sessionStorage.setItem("selectedPortfolios",JSON.stringify(m))},[m]);const d=s.useCallback(()=>{sessionStorage.removeItem("selectedPortfolios"),i([])},[]);return[m,i,d]},V=l=>l?l.startsWith("http")?l:l.startsWith("portfolio/")?`/storage/${l}`:l:null;function Be({portfolios:l,technologies:m,features:i,images:d,stats:n,categories:j,filters:x}){const{props:D}=de(),w=D.flash||{},[h,p]=s.useState({isOpen:!1,portfolioId:null,portfolioTitle:""}),[A,R]=s.useState({isOpen:!1,count:0}),[a,K]=s.useState(x?.tab||"portfolios"),[u,g,F]=Pe([]),[E,N]=s.useState(!1),[I,B]=s.useState(x?.search||""),[P,L]=s.useState(x?.per_page||10),[f,$]=s.useState({key:x?.sort||"created_at",direction:x?.direction||"desc"}),{success:_,error:T}=ue(),b=s.useRef({search:x?.search||"",per_page:x?.per_page||10,sort:x?.sort||"created_at",direction:x?.direction||"desc",tab:x?.tab||"portfolios"}),c=s.useMemo(()=>{switch(a){case"technologies":return m;case"features":return i;case"images":return d;default:return l}},[a,l,m,i,d]);s.useEffect(()=>{const r={search:I,per_page:P,sort:f.key,direction:f.direction,tab:a};if(r.search!==b.current.search||r.per_page!==b.current.per_page||r.sort!==b.current.sort||r.direction!==b.current.direction||r.tab!==b.current.tab){const o=setTimeout(()=>{k.get(route("admin.portfolios.index"),{search:I,sort:f.key,direction:f.direction,per_page:P,tab:a},{preserveState:!0,replace:!0,preserveScroll:!0,onFinish:()=>{b.current=r}})},500);return()=>clearTimeout(o)}},[I,P,f,a]),s.useEffect(()=>{if(c&&c.data&&u.length>0){const r=c.data.map(y=>y.id),t=r.every(y=>u.includes(y)),o=r.some(y=>u.includes(y));N(!!t)}else N(!1)},[c,u]);const Q=s.useCallback(r=>{a==="portfolios"&&k.visit(route("admin.portfolios.show",r.id))},[a]),Z=s.useCallback(()=>{if(c&&c.data){const r=c.data.map(t=>t.id);g(E?t=>t.filter(o=>!r.includes(o)):t=>[...new Set([...t,...r])])}},[E,c,g]),ee=s.useCallback(r=>{g(t=>t.includes(r)?t.filter(o=>o!==r):[...t,r])},[g]),z=s.useCallback((r,t)=>{p({isOpen:!0,portfolioId:r,portfolioTitle:t})},[]),te=s.useCallback(()=>{R({isOpen:!0,count:u.length})},[u.length]),v=s.useCallback(()=>{p({isOpen:!1,portfolioId:null,portfolioTitle:""})},[]),M=s.useCallback(()=>{R({isOpen:!1,count:0})},[]),re=s.useCallback(()=>{h.portfolioId?k.delete(route("admin.portfolios.destroy",h.portfolioId),{onSuccess:()=>{_("Portfolio deleted successfully!"),v(),g(r=>r.filter(t=>t!==h.portfolioId))},onError:()=>{T("Failed to delete portfolio."),v()}}):v()},[h.portfolioId,v,_,T,g]),se=s.useCallback(()=>{u.length>0&&k.post(route("admin.portfolios.bulk-destroy"),{ids:u},{onSuccess:()=>{_(`${u.length} portfolio(s) deleted successfully!`),F(),N(!1),M()},onError:()=>{T("Failed to delete selected portfolios."),M()}})},[u,M,_,T,F]),C=s.useCallback(r=>{$(t=>{let o="asc";return t.key===r&&t.direction==="asc"&&(o="desc"),{key:r,direction:o}})},[]),ae=s.useCallback(()=>{B(""),L(10),$({key:"created_at",direction:"desc"}),k.get(route("admin.portfolios.index"),{tab:a},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{b.current={search:"",per_page:10,sort:"created_at",direction:"desc",tab:a}}})},[a]),oe=s.useCallback(r=>{L(r)},[]),S=s.useCallback(r=>f.key!==r?e.jsx(H,{className:"ml-1 h-4 w-4 opacity-50"}):f.direction==="asc"?e.jsx(H,{className:"ml-1 h-4 w-4"}):e.jsx(ye,{className:"ml-1 h-4 w-4"}),[f]),le=s.useCallback(()=>{const r={portfolios:[{key:"title",label:"Project Title",sortable:!0,onSort:()=>C("title"),sortIcon:S("title"),render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-shrink-0 h-10 w-10",children:[t.featured_image?e.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:V(t.featured_image),alt:t.title,onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`h-10 w-10 rounded-lg bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center ${t.featured_image?"hidden":"flex"}`,children:e.jsx(q,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t.category})]})]})},{key:"status",label:"Status",render:t=>e.jsx("span",{className:`
                                inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                                ${t.status==="published"?"bg-success-100 text-success-800 dark:bg-success-900/30 dark:text-success-300":t.status==="draft"?"bg-warning-100 text-warning-800 dark:bg-warning-900/30 dark:text-warning-300":"bg-error-100 text-error-800 dark:bg-error-900/30 dark:text-error-300"}
                            `,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})},{key:"technologies",label:"Technologies",render:t=>e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.technologies?.slice(0,3).map((o,y)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-neutral-100 text-neutral-800 dark:bg-neutral-800 dark:text-neutral-200",children:o.technology},y)),t.technologies?.length>3&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300",children:["+",t.technologies.length-3]})]})},{key:"highlight",label:"Featured",render:t=>e.jsx("span",{className:`
                                inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                                ${t.highlight?"bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300":"bg-neutral-100 text-neutral-800 dark:bg-neutral-800 dark:text-neutral-200"}
                            `,children:t.highlight?"Featured":"Regular"})},{key:"created_at",label:"Created Date",sortable:!0,onSort:()=>C("created_at"),sortIcon:S("created_at"),render:t=>e.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:new Date(t.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})})}],technologies:[{key:"technology",label:"Technology",sortable:!0,onSort:()=>C("technology"),sortIcon:S("technology"),render:t=>e.jsx("div",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:t.technology})},{key:"portfolio",label:"Project",render:t=>e.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:t.portfolio?.title||"N/A"})},{key:"created_at",label:"Added Date",render:t=>e.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:new Date(t.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})})}],features:[{key:"feature",label:"Feature",sortable:!0,onSort:()=>C("feature"),sortIcon:S("feature"),render:t=>e.jsx("div",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:t.feature})},{key:"portfolio",label:"Project",render:t=>e.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:t.portfolio?.title||"N/A"})},{key:"description",label:"Description",render:t=>e.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t.description||"No description"})}],images:[{key:"image",label:"Image",render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-shrink-0 h-12 w-12",children:[e.jsx("img",{className:"h-12 w-12 rounded-lg object-cover",src:V(t.image_path),alt:t.caption||"Portfolio image",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:`h-12 w-12 rounded-lg bg-neutral-100 dark:bg-neutral-700 flex items-center justify-center ${t.image_path?"hidden":"flex"}`,children:e.jsx(O,{className:"h-6 w-6 text-neutral-400"})})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:t.caption||"No caption"}),e.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t.is_primary?"Primary Image":"Additional Image"})]})]})},{key:"portfolio",label:"Project",render:t=>e.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:t.portfolio?.title||"N/A"})},{key:"uploaded_at",label:"Uploaded",render:t=>e.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:new Date(t.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})})}]};return r[a]||r.portfolios},[a,C,S]),ne=s.useMemo(()=>{const r={portfolios:{title:"No portfolios found",description:"Get started by creating your first portfolio project",icon:J},technologies:{title:"No technologies found",description:"Technologies will appear when you add them to portfolios",icon:Y},features:{title:"No features found",description:"Features will appear when you add them to portfolios",icon:X},images:{title:"No images found",description:"Images will appear when you upload them to portfolios",icon:O}},t=r[a]||r.portfolios,o=t.icon;return e.jsxs("div",{className:"flex flex-col items-center justify-center text-neutral-400 dark:text-neutral-500",children:[e.jsx(o,{className:"h-12 w-12 mb-3 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:t.title}),e.jsx("p",{className:"mt-1 text-sm",children:t.description}),a==="portfolios"&&e.jsx("div",{className:"mt-6",children:e.jsx(U,{href:route("admin.portfolios.create"),children:e.jsxs(G,{className:"flex items-center bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",children:[e.jsx(ke,{className:"mr-2 h-5 w-5"}),"Add New Portfolio"]})})})]})},[a]),ie=s.useCallback(r=>a!=="portfolios"?null:e.jsx(De,{portfolio:r,onView:()=>k.visit(route("admin.portfolios.show",r.id)),onEdit:()=>k.visit(route("admin.portfolios.edit",r.id)),onDelete:()=>z(r.id,r.title)}),[a,z]),ce=s.useMemo(()=>a==="portfolios"?e.jsx(U,{href:route("admin.portfolios.create"),children:e.jsxs(G,{className:"flex items-center bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",children:[e.jsx(J,{className:"mr-2 h-5 w-5"}),"Add Portfolio"]})}):null,[a]);return e.jsxs(xe,{title:"Manage Portfolios",children:[e.jsx(me,{title:"Manage Portfolios"}),e.jsx(W,{isOpen:h.isOpen,onClose:v,onConfirm:re,title:"Confirm Delete",message:`Are you sure you want to delete portfolio "${h.portfolioTitle}"? This action cannot be undone.`,confirmText:"Delete Portfolio",cancelText:"Cancel"}),e.jsx(W,{isOpen:A.isOpen,onClose:M,onConfirm:se,title:"Confirm Bulk Delete",message:`Are you sure you want to delete ${A.count} selected portfolio(s)? This action cannot be undone.`,confirmText:`Delete ${A.count} Portfolios`,cancelText:"Cancel"}),e.jsxs(he,{title:"Portfolio Management",description:"Manage your portfolio projects, technologies, features, and images",createButton:ce,filters:e.jsxs("div",{className:"mb-6",children:[e.jsx(Ie,{activeTab:a,onTabChange:K,stats:n}),e.jsx(be,{searchTerm:I,onSearchChange:B,perPage:P,onPerPageChange:oe,onClearFilters:ae})]}),children:[w.success&&e.jsx("div",{className:"mb-8 bg-success-50 dark:bg-success-900/30 border border-success-200 dark:border-success-800 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-success-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-success-800 dark:text-success-200",children:w.success})})]})}),w.error&&e.jsx("div",{className:"mb-8 bg-error-50 dark:bg-error-900/30 border border-error-200 dark:border-error-800 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-error-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-error-800 dark:text-error-200",children:w.error})})]})}),u.length>0&&a==="portfolios"&&e.jsx("div",{className:"mb-6",children:e.jsx(pe,{selectedCount:u.length,onBulkDelete:te,onClearSelected:F})}),e.jsx("div",{className:"mb-6",children:e.jsx(fe,{columns:le(),data:c?.data||[],selectedItems:u,onSelectItem:ee,onSelectAll:Z,selectAll:E,emptyState:ne,rowActions:ie,keyField:"id",onRowClick:Q,selectable:a==="portfolios"})}),c&&c.data&&c.data.length>0&&c.links&&c.links.length>3&&e.jsx(ge,{data:c})]})]})}export{Be as default};
