import{j as e,s as y,v,w as N,u as k,a as w,b as P,r as C,H as E,q as A,L as S}from"./app-Cvucz7kI.js";import{A as F}from"./AdminLayout-T-97QMqi.js";import{T as R,I as g}from"./InputError-Bckp8oRp.js";import{I}from"./InputLabel-BWLOheBB.js";import{P as q}from"./PrimaryButton-CTDxlp8O.js";const z=({permissions:l=[],selectedPermissions:i=[],onChange:u})=>{const o=Array.isArray(l)?l:[],d=o.reduce((r,t)=>{if(!t||!t.name)return r;const s=t.name.split("."),n=s.length>1?s[0]:"general";return r[n]||(r[n]=[]),r[n].push(t),r},{}),x=(r,t)=>{u(r,t)},c=r=>Array.isArray(i)&&i.includes(r);return o.length===0?e.jsx("div",{className:"text-center py-4 text-neutral-500 dark:text-neutral-400",children:"No permissions available"}):e.jsx("div",{className:"space-y-4",children:Object.entries(d).map(([r,t])=>e.jsxs("div",{className:"border border-neutral-200 dark:border-neutral-700 rounded-xl p-4 bg-white dark:bg-neutral-800 shadow-soft",children:[e.jsx("h4",{className:"font-medium text-neutral-900 dark:text-white mb-3 capitalize text-lg",children:r==="general"?"General Permissions":`${r} Permissions`}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:t.map(s=>e.jsxs("label",{className:"flex items-center p-3 rounded-lg hover:bg-neutral-50 dark:hover:bg-neutral-700 cursor-pointer transition-colors duration-200",children:[e.jsx("input",{type:"checkbox",checked:c(s.name),onChange:n=>x(s.name,n.target.checked),className:"hidden"}),c(s.name)?e.jsx(y,{className:"h-5 w-5 text-primary-500 mr-2"}):e.jsx(v,{className:"h-5 w-5 text-neutral-400 mr-2"}),e.jsx("span",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:s.name.split(".")[1]||s.name}),s.description&&e.jsxs("div",{className:"group relative ml-1",children:[e.jsx(N,{className:"h-4 w-4 text-neutral-400 dark:text-neutral-500"}),e.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-neutral-700 dark:text-neutral-200 bg-white dark:bg-neutral-800 rounded-lg shadow-card opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none w-48 z-10 border border-neutral-200 dark:border-neutral-700",children:s.description})]})]},s.id))})]},r))})};function G({role:l,permissions:i}){const{data:u,setData:o,errors:d,put:x,processing:c}=k({name:l.name,permissions:l.permissions.map(a=>a.name)}),r=Array.isArray(i)?i:[],{success:t,error:s}=w(),{props:n}=P(),m=n.flash||{};C.useEffect(()=>{m.success&&t(m.success),m.error&&s(m.error)},[m]);const b=(a,p)=>{o(f=>{const h=new Set(f.permissions);return p?h.add(a):h.delete(a),{...f,permissions:Array.from(h)}})},j=a=>{a.preventDefault(),x(route("admin.roles.update",l.id),{onSuccess:()=>{t("Role updated successfully!")},onError:p=>{s("Failed to update role. Please check the form.")}})};return e.jsxs(F,{title:"Edit Role",children:[e.jsx(E,{title:"Edit Role"}),e.jsx("div",{className:"mx-auto px-1 lg:px-4 lg:pt-2",children:e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl shadow-card p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Edit Role"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-2",children:"Update role information and permissions."})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"name",value:"Role Name",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{id:"name",type:"text",value:u.name,onChange:a=>o("name",a.target.value),error:d.name,placeholder:"Enter role name",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(g,{message:d.name})]}),e.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-700/30 p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-white mb-4",children:"Permissions"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 text-sm mb-6",children:"Select the permissions this role should have."}),e.jsx(z,{permissions:r,selectedPermissions:u.permissions,onChange:b}),e.jsx(g,{message:d.permissions})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(S,{href:route("admin.role-permissions.index",{type:"roles"}),className:"inline-flex items-center justify-center px-6 py-3 border border-neutral-300 rounded-xl text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-600 transition-colors duration-200 font-medium",children:"Cancel"}),e.jsx(q,{type:"submit",disabled:c,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Role"})]})]})]})})]})}export{G as default};
