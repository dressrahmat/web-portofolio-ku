import{u as U,r as m,a as E,b as I,j as e,H as L,F as R,c as v,d as A,e as _,L as S}from"./app-Cvucz7kI.js";import{A as q}from"./AdminLayout-T-97QMqi.js";import{I as d,T as b}from"./InputError-Bckp8oRp.js";import{P as w}from"./PasswordInput-x5nVp7sw.js";import{P as z}from"./PrimaryButton-CTDxlp8O.js";import{I as o}from"./InputLabel-BWLOheBB.js";function W({roles:h}){const{data:s,setData:a,errors:t,post:N,processing:f,reset:y}=U({name:"",email:"",password:"",password_confirmation:"",foto:null,roles:[]}),[n,x]=m.useState(null),c=m.useRef(null),{success:g,error:u}=E(),{props:k}=I(),i=k.flash||{};m.useEffect(()=>{i.success&&g(i.success),i.error&&u(i.error)},[i]),m.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]);const C=r=>{const l=r.target.files[0];if(l){if(!l.type.startsWith("image/")){u("Please select an image file");return}if(l.size>2*1024*1024){u("Image size must be less than 2MB");return}a("foto",l);const p=URL.createObjectURL(l);x(p)}},F=()=>{a("foto",null),x(null),c.current&&(c.current.value="")},P=r=>{r.preventDefault(),N(route("admin.users.store"),{data:s,onSuccess:()=>{g("User created successfully!"),y(),x(null)},onError:l=>{u("Failed to create user. Please check the form.")},forceFormData:!0})},j=()=>{c.current?.click()};return e.jsxs(q,{title:"Create User",children:[e.jsx(L,{title:"Create User"}),e.jsx("div",{className:"mx-auto px-1 lg:px-4 lg:pt-2",children:e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl shadow-card p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Create New User"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-2",children:"Add a new user to your system with appropriate roles and permissions."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"foto",value:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-dashed border-neutral-300 dark:border-neutral-600 bg-neutral-50 dark:bg-neutral-700 flex items-center justify-center cursor-pointer hover:border-neutral-400 dark:hover:border-neutral-500 transition-colors",onClick:j,children:n?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n,alt:"Preview",className:"w-full h-full rounded-full object-cover"}),e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),F()},className:"absolute -top-2 -right-2 bg-error-500 text-white rounded-full p-1 hover:bg-error-600 transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"w-8 h-8 text-neutral-400 mx-auto mb-1"}),e.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Upload"})]})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-2",children:"Upload a profile photo (max 2MB)"}),e.jsxs("button",{type:"button",onClick:j,className:"inline-flex items-center px-4 py-2 bg-neutral-100 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 rounded-md font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-neutral-800 text-sm",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Select Photo"]})]})]}),e.jsx("input",{ref:c,type:"file",id:"foto",name:"foto",accept:"image/*",onChange:C,className:"hidden"}),e.jsx(d,{message:t.foto})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",value:"Full Name",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{id:"name",type:"text",value:s.name,onChange:r=>a("name",r.target.value),error:t.name,placeholder:"Enter full name",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(d,{message:t.name})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",value:"Email Address",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{id:"email",type:"email",value:s.email,onChange:r=>a("email",r.target.value),error:t.email,placeholder:"Enter email address",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(d,{message:t.email})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"roles",value:"User Roles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-2",children:h&&h.map(r=>e.jsxs("label",{className:"flex items-center p-3 border border-neutral-300 dark:border-neutral-600 rounded-lg cursor-pointer hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors",children:[e.jsx("input",{type:"checkbox",value:r,checked:Array.isArray(s.roles)&&s.roles.includes(r),onChange:l=>{l.target.checked?a("roles",[...s.roles||[],r]):a("roles",(s.roles||[]).filter(p=>p!==r))},className:"rounded border-neutral-300 text-primary-600 shadow-sm focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-neutral-700 dark:text-neutral-300",children:r})]},r))}),e.jsx(d,{message:t.roles})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"password",value:"Password",required:!0}),e.jsx(w,{id:"password",value:s.password,onChange:r=>a("password",r.target.value),error:t.password,placeholder:"Create password"}),e.jsx(d,{message:t.password})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"password_confirmation",value:"Confirm Password",required:!0}),e.jsx(w,{id:"password_confirmation",value:s.password_confirmation,onChange:r=>a("password_confirmation",r.target.value),placeholder:"Confirm password"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(S,{href:route("admin.users.index"),className:"inline-flex items-center justify-center px-6 py-3 border border-neutral-300 rounded-lg text-neutral-700 hover:bg-neutral-50 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700 transition-colors duration-200 font-medium",children:"Cancel"}),e.jsx(z,{type:"submit",disabled:f,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create User"})]})]})]})})]})}export{W as default};
