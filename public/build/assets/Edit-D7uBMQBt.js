import{u as V,r as m,a as $,b as J,j as e,H as X,L as Q}from"./app-Br-_wUYX.js";import{A as Y}from"./AdminLayout-_UXcoW4f.js";import{T as d,I as n}from"./InputError-D1VyfXUl.js";import{T as Z}from"./TextArea-CviC8zHw.js";import{I as c}from"./InputLabel-ABc6Updu.js";import{P as ee}from"./PrimaryButton-kFRxeKdj.js";import{k as re,l as te,m as se,n as ae,o as le,p as ie,F as b,a as R,q as U,r as ne,s as ce}from"./index-DGBmX_sI.js";const de=s=>s?s.startsWith("http")?s:s.startsWith("portfolio/")?`/storage/${s}`:s:null;function fe({portfolio:s,categories:E}){const{data:t,setData:l,errors:a,post:L,processing:o,reset:S}=V({title:s.title||"",description:s.description||"",short_description:s.short_description||"",category:s.category||"",client_name:s.client_name||"",project_date:s.project_date||"",project_url:s.project_url||"",github_url:s.github_url||"",featured_image:null,remove_featured_image:!1,highlight:s.highlight||!1,status:s.status||"draft",sort_order:s.sort_order||0,technologies:s.technologies?.map(r=>r.technology)||[],features:s.features?.map(r=>r.feature)||[],_method:"PUT"}),y=()=>s.featured_image&&!t.remove_featured_image?de(s.featured_image):null,[N,_]=m.useState(y()),[p,k]=m.useState(""),[g,w]=m.useState(""),u=m.useRef(null),{success:F,error:x}=$(),{props:T}=J(),h=T.flash||{};m.useEffect(()=>{h.success&&F(h.success),h.error&&x(h.error)},[h]),m.useEffect(()=>{if(t.featured_image){const r=URL.createObjectURL(t.featured_image);return _(r),()=>URL.revokeObjectURL(r)}else _(y())},[t.featured_image,t.remove_featured_image,s.featured_image]);const A=r=>{const i=r.target.files[0];if(!i)return;if(!i.type.startsWith("image/")){x("Please select an image file");return}if(i.size>5*1024*1024){x("Image size must be less than 5MB");return}const v=new Image;v.onload=function(){const W=this.width,H=this.height,K=W/H,O=16/9;Math.abs(K-O)>.1&&x("Recommended image aspect ratio is 16:9 for best display"),l({...t,featured_image:i,remove_featured_image:!1})},v.onerror=function(){l({...t,featured_image:i,remove_featured_image:!1})},v.src=URL.createObjectURL(i)},D=()=>{l({...t,featured_image:null,remove_featured_image:!!s.featured_image}),u.current&&(u.current.value="")},C=()=>{p.trim()&&!t.technologies.includes(p.trim())&&(l("technologies",[...t.technologies,p.trim()]),k(""))},B=r=>{l("technologies",t.technologies.filter(i=>i!==r))},I=()=>{g.trim()&&!t.features.includes(g.trim())&&(l("features",[...t.features,g.trim()]),w(""))},M=r=>{l("features",t.features.filter(i=>i!==r))},z=r=>{r.key==="Enter"&&(r.preventDefault(),C())},q=r=>{r.key==="Enter"&&(r.preventDefault(),I())},G=r=>{r.preventDefault(),L(route("admin.portfolios.update",s.id),{forceFormData:!0,onSuccess:()=>{F("Portfolio updated successfully!"),S("featured_image","remove_featured_image"),u.current&&(u.current.value="")},onError:i=>{x("Failed to update portfolio. Please check the form.")}})},P=()=>{o||u.current?.click()},f=s.featured_image&&!t.remove_featured_image,j=t.featured_image;return e.jsxs(Y,{title:"Edit Portfolio",children:[e.jsx(X,{title:"Edit Portfolio"}),e.jsx("div",{className:"mx-auto px-1 lg:px-4 lg:pt-2",children:e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl shadow-card p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:["Edit Portfolio: ",s.title]}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-2",children:"Update portfolio project information, technologies, and features."})]}),e.jsxs("form",{onSubmit:G,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"title",value:"Project Title",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"title",type:"text",value:t.title,onChange:r=>l("title",r.target.value),error:a.title,placeholder:"Enter project title",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(re,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:a.title})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"category",value:"Category",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"category",value:t.category,onChange:r=>l("category",r.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select a category"}),E.map(r=>e.jsx("option",{value:r,children:r},r))]}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(te,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:a.category})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"client_name",value:"Client Name"}),e.jsx(d,{id:"client_name",type:"text",value:t.client_name,onChange:r=>l("client_name",r.target.value),error:a.client_name,placeholder:"Enter client name (optional)"}),e.jsx(n,{message:a.client_name})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"project_date",value:"Project Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"project_date",type:"date",value:t.project_date,onChange:r=>l("project_date",r.target.value),error:a.project_date,className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(se,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:a.project_date})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"project_url",value:"Live Project URL"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"project_url",type:"url",value:t.project_url,onChange:r=>l("project_url",r.target.value),error:a.project_url,placeholder:"https://example.com",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ae,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:a.project_url})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"github_url",value:"GitHub Repository"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"github_url",type:"url",value:t.github_url,onChange:r=>l("github_url",r.target.value),error:a.github_url,placeholder:"https://github.com/username/repo",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(le,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(n,{message:a.github_url})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"status",value:"Status",required:!0}),e.jsxs("select",{id:"status",value:t.status,onChange:r=>l("status",r.target.value),className:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsx(n,{message:a.status})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"sort_order",value:"Sort Order"}),e.jsx(d,{id:"sort_order",type:"number",value:t.sort_order,onChange:r=>l("sort_order",parseInt(r.target.value)||0),error:a.sort_order,placeholder:"0"}),e.jsx(n,{message:a.sort_order})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"highlight",type:"checkbox",checked:t.highlight,onChange:r=>l("highlight",r.target.checked),className:"rounded border-neutral-300 text-primary-600 shadow-sm focus:ring-primary-500"}),e.jsx("label",{htmlFor:"highlight",className:"ml-3 text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Feature this project"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"featured_image",value:"Featured Image"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:`w-80 h-45 rounded-lg border-2 border-dashed border-neutral-300 dark:border-neutral-600 bg-neutral-50 dark:bg-neutral-700 flex items-center justify-center cursor-pointer hover:border-neutral-400 dark:hover:border-neutral-500 transition-colors overflow-hidden ${o?"opacity-50 cursor-not-allowed":""}`,onClick:P,style:{aspectRatio:"16/9"},children:o?e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-neutral-400 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:"Processing..."})]}):N?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:N,alt:"Featured image preview",className:"w-full h-full object-cover",onError:r=>{r.target.style.display="none";const i=r.target.parentNode.querySelector(".image-fallback");i&&(i.style.display="flex")}}),e.jsxs("div",{className:"image-fallback hidden w-full h-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-col",children:[e.jsx(ie,{className:"w-12 h-12 text-primary-600 dark:text-primary-400 mb-2"}),e.jsx("span",{className:"text-sm text-primary-600 dark:text-primary-400",children:"Image Preview"})]}),e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),D()},className:"absolute top-2 right-2 bg-error-500 text-white rounded-full p-1 hover:bg-error-600 transition-colors",disabled:o,children:e.jsx(b,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx(R,{className:"w-12 h-12 text-neutral-400 mx-auto mb-2"}),e.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 block",children:"Upload Featured Image"}),e.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500 block mt-1",children:"Recommended: 16:9 aspect ratio"})]})})})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-3",children:f||j?"Change featured image (max 5MB)":"Upload a featured image (max 5MB)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs("button",{type:"button",onClick:P,className:"inline-flex items-center px-4 py-2 bg-neutral-100 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 rounded-md font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-neutral-800 text-sm",disabled:o,children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),f||j?"Change Image":"Select Image"]})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-1",children:"Image Guidelines"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsx("li",{children:"• Recommended aspect ratio: 16:9"}),e.jsx("li",{children:"• Optimal resolution: 1920×1080px"}),e.jsx("li",{children:"• Maximum file size: 5MB"}),e.jsx("li",{children:"• Supported formats: JPG, PNG, WebP"})]})]}),f&&!j&&e.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 bg-neutral-100 dark:bg-neutral-700 rounded p-2",children:["Current image:"," ",s.featured_image]})]})]}),e.jsx("input",{ref:u,type:"file",id:"featured_image",name:"featured_image",accept:"image/*",onChange:A,className:"hidden"}),e.jsx(n,{message:a.featured_image}),f&&!j&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{id:"remove_featured_image",type:"checkbox",checked:t.remove_featured_image,onChange:r=>l("remove_featured_image",r.target.checked),className:"rounded border-neutral-300 text-primary-600 shadow-sm focus:ring-primary-500"}),e.jsx("label",{htmlFor:"remove_featured_image",className:"ml-2 text-sm text-neutral-600 dark:text-neutral-400",children:"Remove current featured image"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"short_description",value:"Short Description"}),e.jsx(d,{id:"short_description",type:"text",value:t.short_description,onChange:r=>l("short_description",r.target.value),error:a.short_description,placeholder:"Brief description (max 500 characters)",maxLength:500}),e.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:[t.short_description.length,"/500 characters"]}),e.jsx(n,{message:a.short_description})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",value:"Full Description",required:!0}),e.jsx(Z,{id:"description",value:t.description,onChange:r=>l("description",r.target.value),error:a.description,placeholder:"Detailed description of the project...",rows:6}),e.jsx(n,{message:a.description})]})]}),e.jsxs("div",{children:[e.jsx(c,{value:"Technologies Used"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{type:"text",value:p,onChange:r=>k(r.target.value),onKeyPress:z,placeholder:"Add a technology (e.g., React, Laravel)",className:"flex-1"}),e.jsxs("button",{type:"button",onClick:C,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:ring-2 focus:ring-primary-500",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),"Add"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.technologies.map((r,i)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),r,e.jsx("button",{type:"button",onClick:()=>B(r),className:"ml-1 hover:text-primary-900 dark:hover:text-primary-100",children:e.jsx(b,{className:"w-3 h-3"})})]},i))})]}),e.jsx(n,{message:a.technologies})]}),e.jsxs("div",{children:[e.jsx(c,{value:"Key Features"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{type:"text",value:g,onChange:r=>w(r.target.value),onKeyPress:q,placeholder:"Add a key feature",className:"flex-1"}),e.jsxs("button",{type:"button",onClick:I,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:ring-2 focus:ring-primary-500",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),"Add"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.features.map((r,i)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-success-100 text-success-800 dark:bg-success-900/30 dark:text-success-300",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),r,e.jsx("button",{type:"button",onClick:()=>M(r),className:"ml-1 hover:text-success-900 dark:hover:text-success-100",children:e.jsx(b,{className:"w-3 h-3"})})]},i))})]}),e.jsx(n,{message:a.features})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(Q,{href:route("admin.portfolios.index"),className:"inline-flex items-center justify-center px-6 py-3 border border-neutral-300 rounded-lg text-neutral-700 hover:bg-neutral-50 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700 transition-colors duration-200 font-medium",children:"Cancel"}),e.jsx(ee,{type:"submit",disabled:o,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Portfolio"})]})]})]})})]})}export{fe as default};
