import{u as K,r as c,a as H,b as W,j as e,H as J,L as V}from"./app-ixndsVVo.js";import{A as X}from"./AdminLayout-DEfAXfXn.js";import{T as o,I as i}from"./InputError-ASPajaSI.js";import{T as Q}from"./TextArea-COiaWfOK.js";import{P as Y}from"./PrimaryButton-Q6V_WmuN.js";import{I as n}from"./InputLabel-CgRer8-q.js";import{k as Z,l as $,m as ee,n as re,o as te,p as se,F as y,a as C,q as P,r as ae,s as le}from"./index-BH6x7HeI.js";function xe({categories:I}){const{data:t,setData:l,errors:s,post:R,processing:N,reset:L}=K({title:"",description:"",short_description:"",category:"",client_name:"",project_date:"",project_url:"",github_url:"",featured_image:null,highlight:!1,status:"draft",sort_order:0,technologies:[],features:[],images:[]}),[d,x]=c.useState(null),[h,j]=c.useState(""),[p,f]=c.useState(""),g=c.useRef(null),{success:k,error:u}=H(),{props:U}=W(),m=U.flash||{};c.useEffect(()=>{m.success&&k(m.success),m.error&&u(m.error)},[m]),c.useEffect(()=>()=>{d&&URL.revokeObjectURL(d)},[d]);const S=r=>{const a=r.target.files[0];if(a){if(!a.type.startsWith("image/")){u("Please select an image file");return}if(a.size>5*1024*1024){u("Image size must be less than 5MB");return}const v=new Image;v.onload=function(){const b=this.width,G=this.height,M=b/G,O=16/9;Math.abs(M-O)>.1&&u("Recommended image aspect ratio is 16:9 for best display"),l("featured_image",a);const z=URL.createObjectURL(a);x(z)},v.onerror=function(){l("featured_image",a);const b=URL.createObjectURL(a);x(b)},v.src=URL.createObjectURL(a)}},E=()=>{l("featured_image",null),x(null),g.current&&(g.current.value="")},w=()=>{h.trim()&&!t.technologies.includes(h.trim())&&(l("technologies",[...t.technologies,h.trim()]),j(""))},T=r=>{l("technologies",t.technologies.filter(a=>a!==r))},_=()=>{p.trim()&&!t.features.includes(p.trim())&&(l("features",[...t.features,p.trim()]),f(""))},A=r=>{l("features",t.features.filter(a=>a!==r))},D=r=>{r.key==="Enter"&&(r.preventDefault(),w())},q=r=>{r.key==="Enter"&&(r.preventDefault(),_())},B=r=>{r.preventDefault(),R(route("admin.portfolios.store"),{data:t,onSuccess:()=>{k("Portfolio created successfully!"),L(),x(null),j(""),f("")},onError:a=>{u("Failed to create portfolio. Please check the form.")},forceFormData:!0})},F=()=>{g.current?.click()};return e.jsxs(X,{title:"Create Portfolio",children:[e.jsx(J,{title:"Create Portfolio"}),e.jsx("div",{className:"mx-auto px-1 lg:px-4 lg:pt-2",children:e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl shadow-card p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Create New Portfolio"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-2",children:"Add a new portfolio project with details, technologies, and features."})]}),e.jsxs("form",{onSubmit:B,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"title",value:"Project Title",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{id:"title",type:"text",value:t.title,onChange:r=>l("title",r.target.value),error:s.title,placeholder:"Enter project title",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Z,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(i,{message:s.title})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"category",value:"Category",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:"category",value:t.category,onChange:r=>l("category",r.target.value),className:"w-full pl-10 pr-4 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select a category"}),I.map(r=>e.jsx("option",{value:r,children:r},r))]}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx($,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(i,{message:s.category})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"client_name",value:"Client Name"}),e.jsx(o,{id:"client_name",type:"text",value:t.client_name,onChange:r=>l("client_name",r.target.value),error:s.client_name,placeholder:"Enter client name (optional)"}),e.jsx(i,{message:s.client_name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"project_date",value:"Project Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{id:"project_date",type:"date",value:t.project_date,onChange:r=>l("project_date",r.target.value),error:s.project_date,className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ee,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(i,{message:s.project_date})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"project_url",value:"Live Project URL"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{id:"project_url",type:"url",value:t.project_url,onChange:r=>l("project_url",r.target.value),error:s.project_url,placeholder:"https://example.com",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(re,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(i,{message:s.project_url})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"github_url",value:"GitHub Repository"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{id:"github_url",type:"url",value:t.github_url,onChange:r=>l("github_url",r.target.value),error:s.github_url,placeholder:"https://github.com/username/repo",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(te,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(i,{message:s.github_url})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"status",value:"Status",required:!0}),e.jsxs("select",{id:"status",value:t.status,onChange:r=>l("status",r.target.value),className:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsx(i,{message:s.status})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"sort_order",value:"Sort Order"}),e.jsx(o,{id:"sort_order",type:"number",value:t.sort_order,onChange:r=>l("sort_order",parseInt(r.target.value)||0),error:s.sort_order,placeholder:"0"}),e.jsx(i,{message:s.sort_order})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"highlight",type:"checkbox",checked:t.highlight,onChange:r=>l("highlight",r.target.checked),className:"rounded border-neutral-300 text-primary-600 shadow-sm focus:ring-primary-500"}),e.jsx("label",{htmlFor:"highlight",className:"ml-3 text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Feature this project"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"featured_image",value:"Featured Image"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-80 h-45 rounded-lg border-2 border-dashed border-neutral-300 dark:border-neutral-600 bg-neutral-50 dark:bg-neutral-700 flex items-center justify-center cursor-pointer hover:border-neutral-400 dark:hover:border-neutral-500 transition-colors overflow-hidden",onClick:F,style:{aspectRatio:"16/9"},children:d?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover",onError:r=>{r.target.style.display="none";const a=r.target.parentNode.querySelector(".image-fallback");a&&(a.style.display="flex")}}),e.jsxs("div",{className:"image-fallback hidden w-full h-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-col",children:[e.jsx(se,{className:"w-12 h-12 text-primary-600 dark:text-primary-400 mb-2"}),e.jsx("span",{className:"text-sm text-primary-600 dark:text-primary-400",children:"Image Preview"})]}),e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),E()},className:"absolute top-2 right-2 bg-error-500 text-white rounded-full p-1 hover:bg-error-600 transition-colors",children:e.jsx(y,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx(C,{className:"w-12 h-12 text-neutral-400 mx-auto mb-2"}),e.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400 block",children:"Upload Featured Image"}),e.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500 block mt-1",children:"Recommended: 16:9 aspect ratio"})]})})})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-3",children:"Upload a featured image (max 5MB)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs("button",{type:"button",onClick:F,className:"inline-flex items-center px-4 py-2 bg-neutral-100 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 rounded-md font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-neutral-800 text-sm",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Select Image"]})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-1",children:"Image Guidelines"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsx("li",{children:"• Recommended aspect ratio: 16:9"}),e.jsx("li",{children:"• Optimal resolution: 1920×1080px"}),e.jsx("li",{children:"• Maximum file size: 5MB"}),e.jsx("li",{children:"• Supported formats: JPG, PNG, WebP"})]})]})]})]}),e.jsx("input",{ref:g,type:"file",id:"featured_image",name:"featured_image",accept:"image/*",onChange:S,className:"hidden"}),e.jsx(i,{message:s.featured_image})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"short_description",value:"Short Description"}),e.jsx(o,{id:"short_description",type:"text",value:t.short_description,onChange:r=>l("short_description",r.target.value),error:s.short_description,placeholder:"Brief description (max 500 characters)",maxLength:500}),e.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:[t.short_description.length,"/500 characters"]}),e.jsx(i,{message:s.short_description})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"description",value:"Full Description",required:!0}),e.jsx(Q,{id:"description",value:t.description,onChange:r=>l("description",r.target.value),error:s.description,placeholder:"Detailed description of the project...",rows:6}),e.jsx(i,{message:s.description})]})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Technologies Used"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"text",value:h,onChange:r=>j(r.target.value),onKeyPress:D,placeholder:"Add a technology (e.g., React, Laravel)",className:"flex-1"}),e.jsxs("button",{type:"button",onClick:w,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:ring-2 focus:ring-primary-500",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Add"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.technologies.map((r,a)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),r,e.jsx("button",{type:"button",onClick:()=>T(r),className:"ml-1 hover:text-primary-900 dark:hover:text-primary-100",children:e.jsx(y,{className:"w-3 h-3"})})]},a))})]}),e.jsx(i,{message:s.technologies})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Key Features"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"text",value:p,onChange:r=>f(r.target.value),onKeyPress:q,placeholder:"Add a key feature",className:"flex-1"}),e.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:ring-2 focus:ring-primary-500",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Add"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.features.map((r,a)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-success-100 text-success-800 dark:bg-success-900/30 dark:text-success-300",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),r,e.jsx("button",{type:"button",onClick:()=>A(r),className:"ml-1 hover:text-success-900 dark:hover:text-success-100",children:e.jsx(y,{className:"w-3 h-3"})})]},a))})]}),e.jsx(i,{message:s.features})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(V,{href:route("admin.portfolios.index"),className:"inline-flex items-center justify-center px-6 py-3 border border-neutral-300 rounded-lg text-neutral-700 hover:bg-neutral-50 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700 transition-colors duration-200 font-medium",children:"Cancel"}),e.jsx(Y,{type:"submit",disabled:N,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Portfolio"})]})]})]})})]})}export{xe as default};
